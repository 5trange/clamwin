<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.4  (Win32)">
	<META NAME="CREATED" CONTENT="20040426;21532900">
	<META NAME="CHANGEDBY" CONTENT="Russell Phillips">
	<META NAME="CHANGED" CONTENT="20050610;9483899">
	<STYLE>
	<!--
		@page { size: 8.27in 11.69in; margin: 0.79in }
		P { margin-bottom: 0.08in }
		P.western { font-family: "Arial", sans-serif }
		H1 { margin-bottom: 0.08in; text-align: center }
		H1.western { font-family: "Arial", sans-serif; font-size: 16pt }
		H1.cjk { font-family: "Mincho"; font-size: 16pt }
		H1.ctl { font-family: "Tahoma"; font-size: 16pt }
		H2 { margin-bottom: 0.08in }
		H2.western { font-family: "Arial", sans-serif; font-size: 14pt; font-style: italic }
		H2.cjk { font-family: "Mincho"; font-size: 14pt; font-style: italic }
		H2.ctl { font-size: 14pt; font-style: italic }
		P.monospace-western { margin-bottom: 0in; font-family: "Courier New", monospace; font-size: 11pt; page-break-before: auto }
		P.monospace-cjk { margin-bottom: 0in; page-break-before: auto }
		P.monospace-ctl { margin-bottom: 0in; page-break-before: auto }
		CODE.western { font-size: 11pt }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-GB" DIR="LTR">
<H1 CLASS="western">Advanced Operation</H1>
<P CLASS="western">This section has details for more advanced users.</P>
<H2 CLASS="western">Modifying ClamWin's Default Configuration</H2>
<P CLASS="western">If a copy of clamwin.conf is in the ClamWin
executable files directory (&quot;C:\Program Files\ClamWin\bin&quot;
on a default installation), then the first time a user runs ClamWin,
it will use the contents of this file as the default configuration.</P>
<P CLASS="western">If you are to set up several new user accounts on
a computer, or if you have just installed ClamWin on a system with
multiple users, it is recommended that you set up a default
configuration and copy the clamwin.conf file to this location.</P>
<H2 CLASS="western">Running a Virus Scan from the Command Line</H2>
<P CLASS="western">ClamWin can be run from the command line, from a
batch file for instance. For a full list of parameters, navigate to
the directory containing the executable files (&quot;C:\Program
Files\ClamWin\bin&quot; on a default installation) and run</P>
<P CLASS="monospace-western"><CODE CLASS="western"><FONT SIZE=2 STYLE="font-size: 11pt">clamscan.exe
--help</FONT></CODE></P>
<P CLASS="western"><CODE CLASS="western"><SPAN STYLE="font-weight: medium"><FONT FACE="Arial, sans-serif">The
database directory <I>must </I><SPAN STYLE="font-style: normal">be
specified, using the </SPAN></FONT></SPAN><CODE CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="font-style: normal"><FONT FACE="Courier New, monospace">--database=FILE/DIR</FONT></SPAN></SPAN></CODE><SPAN STYLE="font-weight: medium"><SPAN STYLE="font-style: normal"><FONT FACE="Arial, sans-serif">
parameter. In a default installation, the command to scan the entire
</FONT></SPAN></SPAN><CODE CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="font-style: normal"><FONT FACE="Courier New, monospace">C:</FONT></SPAN></SPAN></CODE><SPAN STYLE="font-weight: medium"><SPAN STYLE="font-style: normal"><FONT FACE="Arial, sans-serif">
drive would be:</FONT></SPAN></SPAN></CODE></P>
<P CLASS="monospace-western"><CODE CLASS="western"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT FACE="Courier New, monospace">clamscan.exe
--database=&quot;C:\Program Files\ClamWin\db&quot; --recursive C:\</FONT></FONT></CODE></P>
<P CLASS="western"><CODE CLASS="western"><FONT FACE="Arial, sans-serif">Note
the use of the </FONT><CODE CLASS="western"><FONT FACE="Courier New, monospace">--recursive</FONT></CODE><FONT FACE="Arial, sans-serif">
parameter to ensure that sub-directories are scanned.</FONT></CODE></P>
<P CLASS="western"><CODE CLASS="western"><FONT FACE="Arial, sans-serif">When
run from the command line, a value will be returned, indicating
whether or not a virus was detected. If no virus is found, the return
value will be 0. If a virus is found, the return value is 1. Any
other return value indicates an error.</FONT></CODE></P>
<H2 CLASS="western"><CODE CLASS="western"><FONT SIZE=4><FONT FACE="Arial, sans-serif">Updating
the Virus Database from the Command Line</FONT></FONT></CODE></H2>
<P CLASS="western">ClamWin uses <CODE CLASS="western">freshclam.exe</CODE>
to update the virus database. As with the <CODE CLASS="western">clamscan.exe</CODE>
scanning program, this can be run from a command line, batch file,
etc. For a full list of parameters, navigate to the directory
containing the executable files (&quot;C:\Program Files\ClamWin\bin&quot;
on a default installation) and run</P>
<P CLASS="monospace-western"><CODE CLASS="western"><FONT SIZE=2 STYLE="font-size: 11pt">freshclam.exe
--help</FONT></CODE></P>
<P CLASS="western"><CODE CLASS="western"><FONT SIZE=3><FONT FACE="Arial, sans-serif">Both
the database directory and the configuration file <I>must</I><SPAN STYLE="font-style: normal">
be specified. ClamWin generates a freshclam configuration file on the
fly, so you will have to create your own. The configuration file is a
text file. See the </SPAN></FONT></FONT><A HREF="http://www.clamav.net/doc/" TARGET="_top"><SPAN STYLE="font-style: normal"><FONT SIZE=3><FONT FACE="Arial, sans-serif">ClamAV
documentation</FONT></FONT></SPAN></A><SPAN STYLE="font-style: normal"><FONT SIZE=3><FONT FACE="Arial, sans-serif">
for full details of what can be included. A simple freshclam
configuration file would have the following lines (lines beginning
with a # are comments):</FONT></FONT></SPAN></CODE></P>
<P CLASS="monospace-western"><CODE CLASS="western"><SPAN STYLE="font-style: normal"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT FACE="Courier New, monospace">#
URL of server where database updates are to be downloaded from<BR>#
If this option is given multiple times, each will be tried in<BR>#
the order given until an update is successfully downloaded</FONT></FONT></SPAN></CODE></P>
<P CLASS="monospace-western"><CODE CLASS="western"><SPAN STYLE="font-style: normal"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT FACE="Courier New, monospace">DatabaseMirror
database.clamav.net</FONT></FONT></SPAN></CODE></P>
<P CLASS="monospace-western"><CODE CLASS="western"><SPAN STYLE="font-style: normal"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT FACE="Courier New, monospace">#
Number of times to try each mirror before moving to the next one</FONT></FONT></SPAN></CODE></P>
<P CLASS="monospace-western"><CODE CLASS="western"><SPAN STYLE="font-style: normal"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT FACE="Courier New, monospace">MaxAttempts
3</FONT></FONT></SPAN></CODE></P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><CODE CLASS="western"><FONT SIZE=3><FONT FACE="Arial, sans-serif">Once
a freshclam configuration file has been created, freshclam can be run
with a command similar to the one below:</FONT></FONT></CODE></P>
<P CLASS="monospace-western"><CODE CLASS="western"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT FACE="Courier New, monospace">freshclam
--datadir=&quot;C:\Documents and Settings\All Users\.clamwin\db&quot;
--config-file=&quot;C:\Program Files\ClamWin\bin\freshclam.conf&quot;</FONT></FONT></CODE></P>
<H2 CLASS="western"><CODE CLASS="western"><FONT SIZE=4><FONT FACE="Arial, sans-serif">Getting
Updates from a Local Server</FONT></FONT></CODE></H2>
<P CLASS="western"><CODE CLASS="western"><FONT FACE="Arial, sans-serif">If
you have ClamWin running on several networked computers, you may wish
to have a single computer downloading updates from the Internet, with
the others getting updates over the local network. This can be done
in one of three ways.</FONT></CODE></P>
<P CLASS="western"><CODE CLASS="western"><FONT FACE="Arial, sans-serif">The
first (and preferred) method requires a web server. This web server
should have the main.cvd and daily.cvd files in the web root
directory. It should be possible to download the files by pointing a
web browser at </FONT><CODE CLASS="western"><FONT FACE="Courier New, monospace">http://YOURSERVERNAME/main.cvd</FONT></CODE><FONT FACE="Arial, sans-serif">
and </FONT><CODE CLASS="western"><FONT FACE="Courier New, monospace">http://YOURSERVERNAME/daily.cvd</FONT></CODE></CODE></P>
<P CLASS="western"><CODE CLASS="western"><FONT FACE="Arial, sans-serif">In
ClamWin's <B>Internet Updates</B> configuration tab, enter the web
server's IP address or domain name in the <B>Download Site</B><SPAN STYLE="font-weight: medium">
text box. Do not include anything other than the IP address or domain
name (eg </SPAN></FONT><CODE CLASS="western"><SPAN STYLE="font-weight: medium"><FONT FACE="Courier New, monospace">192.168.1.1</FONT></SPAN></CODE><SPAN STYLE="font-weight: medium"><FONT FACE="Arial, sans-serif">
is correct, </FONT></SPAN><CODE CLASS="western"><SPAN STYLE="font-weight: medium"><FONT FACE="Courier New, monospace">http://192.168.1.1/</FONT></SPAN></CODE><SPAN STYLE="font-weight: medium"><FONT FACE="Arial, sans-serif">
is wrong). ClamWin will then query the local web server for updates,
instead of a remote Internet server.</FONT></SPAN></CODE></P>
<P CLASS="western"><CODE CLASS="western"><FONT FACE="Arial, sans-serif">The
second method is to set up a batch file or similar to copy the
main.cvd and daily.cvd files from the server to the relevant location
on the clients, over-writing the existing copies. Windows' Task
Scheduler can be used to run this batch file as often as required.
Disable ClamWin's <B>Enable Automatic Virus Database Updates</B>
option, so that it does not query the remote Internet server for
updates.</FONT></CODE></P>
<P CLASS="western"><CODE CLASS="western"><FONT FACE="Arial, sans-serif">The
third method is to set the Virus Database Folder in all copies of
ClamWin to a shared folder (eg </FONT><CODE CLASS="western"><FONT FACE="Courier New, monospace">\\SERVER-NAME\SHARED-DRIVE\db</FONT></CODE><FONT FACE="Arial, sans-serif">).
Note that, in this case, only one copy of ClamWin (preferably the
copy on the server) should be set up to get automatic updates.</FONT></CODE></P>
<H2 CLASS="western"><CODE CLASS="western"><B><FONT SIZE=4><FONT FACE="Arial, sans-serif">Manually
Updating the Virus Database</FONT></FONT></B></CODE></H2>
<P CLASS="western"><CODE CLASS="western"><SPAN STYLE="font-weight: medium"><FONT FACE="Arial, sans-serif">To
update the virus database manually, download the virus database files
</FONT><FONT FACE="Courier New, monospace">main.cvd</FONT><FONT FACE="Arial, sans-serif">
and</FONT><FONT FACE="Courier New, monospace"> daily.cvd</FONT><FONT SIZE=2 STYLE="font-size: 11pt"><FONT FACE="Arial, sans-serif">
</FONT></FONT></SPAN></CODE><FONT SIZE=2 STYLE="font-size: 11pt"><FONT FACE="Arial, sans-serif">and
copy them to ClamWin's virus database folder, over-writing the
existing files. The virus database files can be downloaded from
ClamAV's home page at </FONT></FONT><A HREF="http://www.clamav.net/"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT FACE="Arial, sans-serif">www.clamav.net</FONT></FONT></A></P>
<P CLASS="western"><BR><BR>
</P>
</BODY>
</HTML>